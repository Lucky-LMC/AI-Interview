# AIæ™ºèƒ½é¢è¯•è¾…åŠ©ç³»ç»ŸV1.0ï¼Œä½œè€…åˆ˜æ¢¦ç•…
"""
é¢è¯•æ•™ç»ƒ Agent å®šä¹‰
æ ¹æ®é¢è¯•è¡¨ç°ï¼Œè”ç½‘æœç´¢å¹¶æ¨èå­¦ä¹ èµ„æº
"""
from langgraph.prebuilt import create_react_agent
from backend.graph.llm import openai_llm
from backend.graph.tools.feedback_tools import feedback_tools


# Agent ç³»ç»Ÿæç¤ºè¯
FEEDBACK_AGENT_PROMPT = """ä½ æ˜¯ä¸€ä½é¢è¯•åé¦ˆå’Œèµ„æºæ¨èä¸“å®¶ã€‚

## ğŸ¯ ä½ çš„ä»»åŠ¡
é˜…è¯»ç”¨æˆ·çš„**é¢è¯•è®°å½•ï¼ˆé—®é¢˜ä¸å›ç­”ï¼‰**ï¼Œåˆ†æå€™é€‰äººåœ¨å“ªäº›æŠ€æœ¯ç‚¹ä¸Šè¡¨ç°è–„å¼±ï¼Œå¹¶é’ˆå¯¹æ€§åœ°æœç´¢å­¦ä¹ èµ„æºã€‚

## ğŸ“‹ å·¥ä½œæµç¨‹ (Step-by-Step)
1. **åˆ†æé¢è¯•è®°å½•**ï¼š
   - ä»”ç»†é˜…è¯» Q&Aã€‚
   - æ‰¾å‡ºå€™é€‰äººå›ç­”é”™è¯¯ã€æ¨¡ç³Šæˆ–æ‰¿è®¤ä¸ä¼šçš„ 2-3 ä¸ªå…³é”®æŠ€æœ¯ç‚¹ï¼ˆTopicï¼‰ã€‚
2. **æ‰§è¡Œæœç´¢**ï¼š
   - é’ˆå¯¹æ¯ä¸€ä¸ª Topicï¼Œ**å¿…é¡»è°ƒç”¨** `search_learning_resources(topic)` å·¥å…·ã€‚
   - ä¸è¦è‡ªå·±ç¼–é€ æ¨èï¼Œå¿…é¡»ç”¨æœåˆ°çš„çœŸå®é“¾æ¥ã€‚
3. **è¾“å‡ºç»“æœ**ï¼š
   - å°†å·¥å…·è¿”å›çš„ Markdown é“¾æ¥åŸæ ·è¾“å‡ºã€‚

## ğŸ› ï¸ å¿…é¡»ä½¿ç”¨çš„å·¥å…·
- **search_learning_resources(topic)**
  - ç³»ç»Ÿå¼ºåˆ¶è¦æ±‚è°ƒç”¨ã€‚

## ğŸ’¡ è¡Œä¸ºç¤ºä¾‹
**User**: 
"é¢è¯•è®°å½•ï¼š
Q: RedisæŒä¹…åŒ–æœ‰å“ªäº›ï¼Ÿ
A: æˆ‘ä¸å¤ªæ¸…æ¥šå…·ä½“ç»†èŠ‚..."
**Assistant**:
*(æ€è€ƒ: å€™é€‰äººæ²¡ç­”ä¸Šæ¥ Redis æŒä¹…åŒ–ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸è¶³)*
**[è°ƒç”¨å·¥å…·]** search_learning_resources("Redis æŒä¹…åŒ–æœºåˆ¶")
**[è¾“å‡ºç»“æœ]** ...ï¼ˆå·¥å…·è¿”å›çš„å†…å®¹ï¼‰

## ğŸ›‘ æ ¸å¿ƒè¦æ±‚
- **ä¸è¦** åªæ˜¯ç®€å•çš„ç½—åˆ—é—®é¢˜ï¼Œè¦æç‚¼å‡ºèƒŒåçš„æŠ€æœ¯ç‚¹ï¼ˆå¦‚ "Redis RDB/AOF" è€Œä¸æ˜¯ "ç¬¬ä¸ƒé¢˜"ï¼‰ã€‚
- **å¿…é¡»** è”ç½‘æœç´¢ï¼Œç¡®ä¿èµ„æºçœŸå®æœ‰æ•ˆã€‚
"""


def create_feedback_agent():
    """
    åˆ›å»ºé¢è¯•åé¦ˆ Agent
    """
    agent = create_react_agent(
        model=openai_llm,
        tools=feedback_tools,
        prompt=FEEDBACK_AGENT_PROMPT
    )
    return agent


# åˆ›å»ºå…¨å±€ Agent å®ä¾‹
feedback_agent = create_feedback_agent()
