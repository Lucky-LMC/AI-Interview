# AIæ™ºèƒ½é¢è¯•è¾…åŠ©ç³»ç»ŸV1.0ï¼Œä½œè€…åˆ˜æ¢¦ç•…
"""
é¢è¯•å®˜ Agent å®šä¹‰
ä½¿ç”¨ ReAct æ¨¡å¼ï¼Œå¯ä»¥è°ƒç”¨å·¥å…·è¿›è¡Œå‡ºé¢˜
æ”¯æŒæµå¼è¾“å‡ºï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰
"""
from langgraph.prebuilt import create_react_agent
from langchain_core.messages import SystemMessage
from backend.graph.llm import openai_llm
from backend.graph.tools import interviewer_tools


# Agent ç³»ç»Ÿæç¤ºè¯
INTERVIEWER_AGENT_PROMPT = """ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„é¢è¯•å®˜ Agentã€‚

## ğŸ§  å·¥å…·è°ƒç”¨æŒ‡ä»¤

è¯·ä¸¥æ ¼éµå®ˆä»¥ä¸‹é¢è¯•æµç¨‹ï¼Œæ ¹æ®å½“å‰è½®æ¬¡è°ƒç”¨å¯¹åº”çš„å·¥å…·ï¼š

### 1ï¸âƒ£ ç¬¬1è½®ï¼šæŠ€æœ¯åŸºç¡€ (Technical)
- **æŒ‡ä»¤**ï¼š**å¿…é¡»è°ƒç”¨** `search_interview_questions`ã€‚
- **ç›®çš„**ï¼šåˆ©ç”¨æœç´¢å¼•æ“è·å–è¯¥å²—ä½æœ€æ–°çš„æŠ€æœ¯é¢è¯•é¢˜ã€å…«è‚¡æ–‡ï¼Œè€ƒå¯ŸåŸºç¡€æ‰å®åº¦ã€‚

### 2ï¸âƒ£ ç¬¬2è½®ï¼šé¡¹ç›®ä¸æ²Ÿé€š (Project & behavioral)
- **æŒ‡ä»¤**ï¼š**å¿…é¡»è°ƒç”¨** `generate_from_resume`ã€‚
- **ç›®çš„**ï¼šæ·±æŒ–ç®€å†ä¸­çš„é¡¹ç›®ç»å†ï¼Œè€ƒå¯Ÿå®é™…è§£å†³é—®é¢˜çš„èƒ½åŠ›å’Œå›¢é˜Ÿåä½œç»†èŠ‚ã€‚

### 3ï¸âƒ£ ç¬¬3è½®ï¼šHRä¸æ–‡åŒ– (HR & Culture)
- **æŒ‡ä»¤**ï¼š**å¿…é¡»è°ƒç”¨** `search_interview_questions`ã€‚
- **ç›®çš„**ï¼šä»ç½‘ä¸Šæœç´¢ HR é¢è¯•é¢˜ï¼ˆèŒä¸šè§„åˆ’ã€è–ªèµ„ã€ä»·å€¼è§‚ç­‰ï¼‰ã€‚

## âš ï¸ è¾“å‡ºä¸¥æ ¼è¦æ±‚
1. **å·¥å…·è°ƒç”¨**ï¼šæ‰§è¡Œé€‰å®šçš„å·¥å…·ã€‚
2. **æœ€ç»ˆè¾“å‡º**ï¼šä»å·¥å…·è¿”å›çš„ç»“æœä¸­ï¼Œ**ç²¾å¿ƒæŒ‘é€‰ 1 ä¸ª** æœ€å…·å«é‡‘é‡çš„é—®é¢˜ã€‚
   - ä¸è¦è¾“å‡ºåˆ—è¡¨ï¼åªè¦ 1 ä¸ªé—®é¢˜ã€‚
   - é—®é¢˜å¿…é¡»æ¸…æ™°ã€ç›´æ¥ã€‚
   - **ç»å¯¹ç¦æ­¢**é‡å¤ä¹‹å‰å·²ç»é—®è¿‡çš„é—®é¢˜ï¼ˆè¯·æ£€æŸ¥å†å²è®°å½•ï¼‰ã€‚
"""


def create_interviewer_agent():
    """
    åˆ›å»ºé¢è¯•å®˜ Agent
    
    ä½¿ç”¨ LangGraph çš„ create_react_agent åˆ›å»ºä¸€ä¸ªå¯ä»¥è°ƒç”¨å·¥å…·çš„ Agent
    è¿”å›çš„æ˜¯ä¸€ä¸ª CompiledGraphï¼Œå¯ä»¥ç›´æ¥ä½œä¸ºå­å›¾ä½¿ç”¨
    """
    agent = create_react_agent(
        model=openai_llm,
        tools=interviewer_tools,
        prompt=INTERVIEWER_AGENT_PROMPT
    )
    return agent


# åˆ›å»ºå…¨å±€ Agent å®ä¾‹
# è¿™ä¸ªå®ä¾‹å¯ä»¥ç›´æ¥ä½œä¸ºå­å›¾åµŒå…¥åˆ°ä¸»å·¥ä½œæµä¸­
interviewer_agent = create_interviewer_agent()
